"use strict";(globalThis.webpackChunkcrpe_2026=globalThis.webpackChunkcrpe_2026||[]).push([[216],{7981(e,r,o){o.r(r),o.d(r,{default:()=>c});var n=o(6540),t=o(1656),i=o(5122),a=o(5421),l=o(5920),d=o(6347),s=o(4848);function c(){const[e,r]=(0,n.useState)(""),[o,c]=(0,n.useState)(""),[m,u]=(0,n.useState)(""),[p,x]=(0,n.useState)(!1),[g,h]=(0,n.useState)("login"),{user:b}=(0,l.A)(),f=(0,d.W6)(),y=(0,d.zy)();(0,n.useEffect)(()=>{if(b){const e=y.state?.from||"/";f.push(e)}},[b,f,y]);const j=async()=>{try{await(0,i.CI)(a.j),f.push("/login")}catch(e){console.error("Erreur d\xe9connexion:",e)}};return b?(0,s.jsx)(t.A,{title:"Connexion",description:"Espace de connexion",children:(0,s.jsx)("div",{style:{maxWidth:"500px",margin:"4rem auto",padding:"0 2rem"},children:(0,s.jsxs)("div",{style:{backgroundColor:"white",padding:"3rem",borderRadius:"16px",boxShadow:"0 4px 12px rgba(255, 182, 185, 0.15)",textAlign:"center"},children:[(0,s.jsx)("h1",{style:{color:"#ff9a9e",marginBottom:"2rem"},children:"\ud83e\udda6 Connect\xe9e !"}),(0,s.jsxs)("p",{style:{fontSize:"1.1rem",marginBottom:"2rem"},children:["Tu es connect\xe9e en tant que : ",(0,s.jsx)("br",{}),(0,s.jsx)("strong",{children:b.email})]}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",alignItems:"center"},children:[(0,s.jsx)("a",{href:"/",style:{padding:"0.75rem 2rem",backgroundColor:"#ff9a9e",color:"white",textDecoration:"none",border:"none",borderRadius:"20px",fontWeight:"600",fontSize:"1rem",display:"inline-block"},children:"\ud83c\udfe0 Retour \xe0 l'accueil"}),(0,s.jsx)("button",{onClick:j,style:{padding:"0.75rem 2rem",backgroundColor:"#ff6b6b",color:"white",border:"none",borderRadius:"20px",fontWeight:"600",cursor:"pointer",fontSize:"1rem"},children:"\ud83d\udeaa Se d\xe9connecter"})]})]})})}):(0,s.jsx)(t.A,{title:"Connexion",description:"Espace de connexion",children:(0,s.jsx)("div",{style:{maxWidth:"500px",margin:"4rem auto",padding:"0 2rem"},children:(0,s.jsxs)("div",{style:{backgroundColor:"white",padding:"3rem",borderRadius:"16px",boxShadow:"0 4px 12px rgba(255, 182, 185, 0.15)"},children:[(0,s.jsxs)("h1",{style:{color:"#ff9a9e",textAlign:"center",marginBottom:"2rem"},children:["\ud83e\udda6 ","login"===g?"Connexion":"Cr\xe9er un compte"]}),(0,s.jsxs)("form",{onSubmit:async r=>{r.preventDefault(),u(""),x(!0);try{"login"===g?await(0,i.x9)(a.j,e,o):await(0,i.eJ)(a.j,e,o)}catch(n){console.error("Erreur:",n),"auth/invalid-credential"===n.code?u("Email ou mot de passe incorrect"):"auth/email-already-in-use"===n.code?u("Cet email est d\xe9j\xe0 utilis\xe9"):"auth/weak-password"===n.code?u("Le mot de passe doit contenir au moins 6 caract\xe8res"):"auth/invalid-email"===n.code?u("Email invalide"):u("Une erreur est survenue. R\xe9essayez.")}finally{x(!1)}},children:[(0,s.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,s.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#4a4a4a"},children:"Email"}),(0,s.jsx)("input",{type:"email",value:e,onChange:e=>r(e.target.value),required:!0,style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"2px solid #ffe5e6",fontSize:"1rem",boxSizing:"border-box"}})]}),(0,s.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,s.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#4a4a4a"},children:"Mot de passe"}),(0,s.jsx)("input",{type:"password",value:o,onChange:e=>c(e.target.value),required:!0,minLength:6,style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"2px solid #ffe5e6",fontSize:"1rem",boxSizing:"border-box"}}),"signup"===g&&(0,s.jsx)("small",{style:{color:"#666",fontSize:"0.85rem"},children:"Minimum 6 caract\xe8res"})]}),m&&(0,s.jsx)("div",{style:{padding:"0.75rem",backgroundColor:"#ffe5e6",color:"#ff6b6b",borderRadius:"8px",marginBottom:"1.5rem",textAlign:"center"},children:m}),(0,s.jsx)("button",{type:"submit",disabled:p,style:{width:"100%",padding:"0.75rem",backgroundColor:p?"#ccc":"#ff9a9e",color:"white",border:"none",borderRadius:"20px",fontWeight:"600",cursor:p?"not-allowed":"pointer",fontSize:"1rem",marginBottom:"1rem"},children:p?"Chargement...":"login"===g?"Se connecter":"Cr\xe9er mon compte"})]}),(0,s.jsx)("div",{style:{textAlign:"center",marginTop:"1.5rem"},children:(0,s.jsx)("button",{onClick:()=>{h("login"===g?"signup":"login"),u("")},style:{background:"none",border:"none",color:"#ff9a9e",cursor:"pointer",textDecoration:"underline",fontSize:"0.95rem"},children:"login"===g?"Pas encore de compte ? Cr\xe9er un compte":"D\xe9j\xe0 un compte ? Se connecter"})})]})})})}}}]);