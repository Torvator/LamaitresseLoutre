"use strict";(globalThis.webpackChunkcrpe_2026=globalThis.webpackChunkcrpe_2026||[]).push([[658],{515(e,r,t){t.d(r,{S:()=>s,b:()=>i});const i={HOME:"/LamaitresseLoutre/",LOGIN:"/LamaitresseLoutre/login",PROFIL:"/LamaitresseLoutre/profil",SUIVI:"/LamaitresseLoutre/suivi",COMMENTAIRES:"/LamaitresseLoutre/commentaires"};function s(e){window.location.href=e}},2982(e,r,t){t.r(r),t.d(r,{default:()=>f});var i=t(6540),s=t(1656),o=t(8185),n=t(5421),a=t(5920),l=t(5653),d=t(4070),c=t(4848);function u({label:e,total:r,maitrise:t,enCours:i}){const s=r>0?t/r*100:0,o=r>0?i/r*100:0,n=100-s-o;return(0,c.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,c.jsx)("strong",{style:{fontSize:"1.1rem"},children:e}),(0,c.jsxs)("span",{style:{color:"#666"},children:[t,"/",r," ma\xeetris\xe9es"]})]}),(0,c.jsxs)("div",{style:{width:"100%",height:"30px",backgroundColor:"#f0f0f0",borderRadius:"15px",overflow:"hidden",display:"flex",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,c.jsx)("div",{style:{width:`${s}%`,backgroundColor:"#6bcf7f",transition:"width 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"600",fontSize:"0.85rem"},children:s>10&&`${Math.round(s)}%`}),(0,c.jsx)("div",{style:{width:`${o}%`,backgroundColor:"#ffd93d",transition:"width 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",color:"#4a4a4a",fontWeight:"600",fontSize:"0.85rem"},children:o>10&&`${Math.round(o)}%`}),(0,c.jsx)("div",{style:{width:`${n}%`,backgroundColor:"#ff6b6b",transition:"width 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"600",fontSize:"0.85rem"},children:n>10&&`${Math.round(n)}%`})]}),(0,c.jsxs)("div",{style:{display:"flex",gap:"1rem",marginTop:"0.5rem",fontSize:"0.9rem",color:"#666"},children:[(0,c.jsxs)("span",{children:["\ud83d\udfe2 ",t," Ma\xeetris\xe9es"]}),(0,c.jsxs)("span",{children:["\ud83d\udfe1 ",i," En cours"]}),(0,c.jsxs)("span",{children:["\ud83d\udd34 ",r-t-i," Non commenc\xe9es"]})]})]})}function m({fiches:e,titre:r,statut:t,couleur:i,onFicheClick:s}){return 0===e.length?null:(0,c.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,c.jsxs)("h3",{style:{color:i,marginBottom:"1rem"},children:[r," (",e.length,")"]}),(0,c.jsx)("ul",{style:{listStyle:"none",padding:0},children:e.map(e=>(0,c.jsxs)("li",{style:{padding:"0.75rem",marginBottom:"0.5rem",backgroundColor:"#fff9f0",borderRadius:"8px",borderLeft:`4px solid ${i}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,c.jsxs)("a",{href:e.url,style:{textDecoration:"none",color:"#4a4a4a",fontWeight:"500",flex:1},children:[e.matiere," \u2192 ",e.nom]}),(0,c.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:["MAITRISE"!==t&&(0,c.jsx)("button",{onClick:()=>s(e.id,"MAITRISE"),style:{padding:"0.25rem 0.75rem",backgroundColor:"#6bcf7f",color:"white",border:"none",borderRadius:"12px",fontSize:"0.8rem",cursor:"pointer"},children:"\u2713 Ma\xeetris\xe9e"}),"EN_COURS"!==t&&"MAITRISE"!==t&&(0,c.jsx)("button",{onClick:()=>s(e.id,"EN_COURS"),style:{padding:"0.25rem 0.75rem",backgroundColor:"#ffd93d",color:"#4a4a4a",border:"none",borderRadius:"12px",fontSize:"0.8rem",cursor:"pointer"},children:"\u23f3 En cours"}),"NON_COMMENCE"!==t&&(0,c.jsx)("button",{onClick:()=>s(e.id,"NON_COMMENCE"),style:{padding:"0.25rem 0.75rem",backgroundColor:"#ff6b6b",color:"white",border:"none",borderRadius:"12px",fontSize:"0.8rem",cursor:"pointer"},children:"\ud83d\udd04 R\xe9initialiser"})]})]},e.id))})]})}function h(){const[e,r]=(0,i.useState)({}),[t,s]=(0,i.useState)(!0),{user:l}=(0,a.A)(),h=(0,d.Gy)();(0,i.useEffect)(()=>{if(!l)return void s(!1);(async()=>{try{const e=(()=>{const e=[];return Object.values(h).forEach(r=>{r?.versions&&r.versions.forEach(r=>{r?.docs&&r.docs.forEach(r=>{if("intro"===r.id||r.id.includes("category"))return;const t=r.id.split("/");let i="Autre";"francais"===t[0]?i="Fran\xe7ais":"maths"===t[0]||"mathematiques"===t[0]?i="Math\xe9matiques":"sciences"===t[0]?i="Sciences":"histoire"===t[0]?i="Histoire":"geographie"===t[0]?i="G\xe9ographie":"emc"===t[0]?i="EMC":"arts-plastiques"===t[0]?i="Arts Plastiques":"musique"===t[0]?i="Musique":"eps"===t[0]?i="EPS":"langues"===t[0]&&(i="Langues"),e.push({id:r.id,nom:r.title,url:r.permalink,matiere:i})})})}),e})(),t={};e.forEach(e=>{t[e.matiere]||(t[e.matiere]=[]),t[e.matiere].push(e)});const i={},s={maitrisees:[],enCours:[],nonCommencees:[]},a={},d=(0,o.rJ)(n.db,"users",l.uid,"fiches");(await(0,o.GG)(d)).forEach(e=>{a[e.id]=e.data().statut}),Object.entries(t).forEach(([e,r])=>{const t=r.filter(e=>"MAITRISE"===a[e.id]).length,o=r.filter(e=>"EN_COURS"===a[e.id]).length;i[e]={total:r.length,maitrise:t,enCours:o},r.forEach(e=>{const r=a[e.id];"MAITRISE"===r?s.maitrisees.push(e):"EN_COURS"===r?s.enCours.push(e):s.nonCommencees.push(e)})}),r({statsParMatiere:i,toutesLesFiches:s})}catch(e){console.error("Erreur chargement stats:",e)}finally{s(!1)}})()},[l]);const f=async(e,r)=>{if(l)try{const t=(0,o.H9)(n.db,"users",l.uid,"fiches",e);await(0,o.BN)(t,{statut:r},{merge:!0}),window.location.reload()}catch(t){console.error("Erreur mise \xe0 jour statut:",t),alert("Erreur lors de la mise \xe0 jour")}};if(t)return(0,c.jsx)("div",{style:{maxWidth:"1000px",margin:"4rem auto",padding:"0 2rem",textAlign:"center"},children:(0,c.jsx)("p",{style:{fontSize:"1.2rem"},children:"Chargement de ta progression..."})});const{statsParMatiere:p={},toutesLesFiches:x={}}=e,g=Object.values(p).reduce((e,r)=>e+(r?.total||0),0),b=Object.values(p).reduce((e,r)=>e+(r?.maitrise||0),0),j=Object.values(p).reduce((e,r)=>e+(r?.enCours||0),0);return(0,c.jsxs)("div",{style:{maxWidth:"1000px",margin:"2rem auto",padding:"0 2rem"},children:[(0,c.jsxs)("div",{style:{background:"linear-gradient(135deg, #ffecd2 0%, #ffcbb3 25%, #ffb6b9 50%, #ffc9cb 75%, #ffd89b 100%)",padding:"2rem",borderRadius:"16px",marginBottom:"2rem",textAlign:"center"},children:[(0,c.jsx)("h1",{style:{color:"#3d3d3d",marginBottom:"1rem"},children:"\ud83d\udcca Suivi de Progression"}),(0,c.jsxs)("p",{style:{fontSize:"1.2rem",color:"#4a4a4a"},children:[g," le\xe7on",g>1?"s":""," d\xe9tect\xe9e",g>1?"s":""," automatiquement ! \ud83e\udda6"]})]}),(0,c.jsxs)("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"16px",boxShadow:"0 4px 12px rgba(255, 182, 185, 0.15)",marginBottom:"2rem"},children:[(0,c.jsx)("h2",{style:{color:"#ff9a9e",marginBottom:"2rem"},children:"\ud83c\udfaf Progression Globale"}),(0,c.jsx)(u,{label:"Toutes mati\xe8res",total:g,maitrise:b,enCours:j})]}),(0,c.jsxs)("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"16px",boxShadow:"0 4px 12px rgba(255, 182, 185, 0.15)",marginBottom:"2rem"},children:[(0,c.jsx)("h2",{style:{color:"#ff9a9e",marginBottom:"2rem"},children:"\ud83d\udcda Par Mati\xe8re"}),Object.entries(p).map(([e,r])=>(0,c.jsx)(u,{label:e,total:r.total,maitrise:r.maitrise,enCours:r.enCours},e))]}),(0,c.jsxs)("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"16px",boxShadow:"0 4px 12px rgba(255, 182, 185, 0.15)"},children:[(0,c.jsx)("h2",{style:{color:"#ff9a9e",marginBottom:"2rem"},children:"\ud83d\udcdd D\xe9tail des Fiches"}),(0,c.jsx)(m,{fiches:x.maitrisees||[],titre:"\ud83d\udfe2 Fiches Ma\xeetris\xe9es",statut:"MAITRISE",couleur:"#6bcf7f",onFicheClick:f}),(0,c.jsx)(m,{fiches:x.enCours||[],titre:"\ud83d\udfe1 Fiches En Cours",statut:"EN_COURS",couleur:"#ffd93d",onFicheClick:f}),(0,c.jsx)(m,{fiches:x.nonCommencees||[],titre:"\ud83d\udd34 Fiches Non Commenc\xe9es",statut:"NON_COMMENCE",couleur:"#ff6b6b",onFicheClick:f})]}),(0,c.jsx)("div",{style:{marginTop:"2rem",padding:"2rem",backgroundColor:"#fff9f0",borderRadius:"12px",textAlign:"center"},children:(0,c.jsxs)("p",{style:{fontSize:"1.2rem",color:"#4a4a4a"},children:[0===b&&"\ud83e\udda6 C'est parti ! Commence par une premi\xe8re fiche !",b>0&&b<g&&`\ud83e\udda6 Super travail ! Tu as d\xe9j\xe0 ma\xeetris\xe9 ${b} fiche${b>1?"s":""} !`,b===g&&g>0&&"\ud83c\udf89 BRAVO ! Tu as ma\xeetris\xe9 toutes les fiches ! \ud83e\udda6"]})})]})}function f(){return(0,c.jsx)(l.A,{title:"Suivi de progression",description:"Suivi de ta progression CRPE",children:(0,c.jsx)(s.A,{title:"Suivi de progression",description:"Suivi de ta progression CRPE",children:(0,c.jsx)(h,{})})})}},5653(e,r,t){t.d(r,{A:()=>l});var i=t(6540),s=t(5920),o=t(515),n=t(1656),a=t(4848);function l({children:e,title:r,description:t}){const{user:l,loading:d}=(0,s.A)();return(0,i.useEffect)(()=>{d||l||(0,o.S)(o.b.LOGIN)},[l,d]),d?(0,a.jsx)(n.A,{title:r,description:t,children:(0,a.jsx)("div",{style:{maxWidth:"600px",margin:"4rem auto",padding:"0 2rem",textAlign:"center"},children:(0,a.jsx)("p",{style:{fontSize:"1.2rem",color:"#4a4a4a"},children:"Chargement..."})})}):l?e:(0,a.jsx)(n.A,{title:r,description:t,children:(0,a.jsx)("div",{style:{maxWidth:"600px",margin:"4rem auto",padding:"0 2rem",textAlign:"center"},children:(0,a.jsx)("p",{style:{fontSize:"1.2rem",color:"#4a4a4a"},children:"Redirection vers la connexion..."})})})}}}]);